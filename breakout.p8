pico-8 cartridge // http://www.pico-8.com
version 18
__lua__
-- pad
pad = {
	x=52,
	y=122,
	w=24,
	h=4
}

-- ball
ball = {
	x=64,
	y=44,
	size=2,
	xdir=5,
	ydir=3
}

-- first brick
brick = {
	x=1, --offset
	y=20,--offset
	w=12,
	h=2,
	spacing=2
}

brick_rows = 4
brick_columns = 9

score=0
lives=3


bricks = {}
for c = 0, brick_columns-1 do
 bricks[c] = {}
 for r = 0, brick_rows-1 do
  bricks[c][r] = {x = 0, y = 0, hit = 0, col = 06}
 end
end


function movepad()
	if btn (0) then
		pad.x-=3
	elseif btn(1) then
		pad.x+=3
	end
end

function moveball()
 ball.x+=ball.xdir
 ball.y+=ball.ydir
end

function lostdeadball()
 if ball.y>128 then
  if lives>0 then
   sfx(3)
   ball.y=44
   lives-=1
  else
   ball.ydir=0
   ball.xdir=0
   ball.y=44 --remove?
   sfx(4)
  end
 end
end

function bounceball()
	-- left
	if ball.x < ball.size then
		ball.xdir=-ball.xdir
		sfx(0)
	end
	-- right
	if ball.x > 128-ball.size then
		ball.xdir=-ball.xdir
		sfx(0)
	end
	-- top
	if ball.y < ball.size then
		ball.ydir=-ball.ydir
		sfx(0)
	end
end

function bouncepad()
	if ball.x>=pad.x and
		ball.x<=pad.x+pad.w and
		ball.y>pad.y-pad.h-2 then
		sfx(0)
  score+=10
		ball.ydir=-ball.ydir
	end
end

function bouncebrick()
	for c=0,brick_columns-1 do
	 for r=0,brick_rows-1 do
	  b = bricks[c][r]	  
			if b.hit == 0 then
			 if  ball.x > b.x 
 			 and ball.x < b.x+brick.w 
	 		 and ball.y >= b.y 
		 	 and ball.y-2 <= b.y+brick.h*2
				then
				 sfx(0)
				 ball.ydir=-ball.ydir
			  b.hit = 1
			 end
  end
  end
 end
end


function drawbricks()
	for c=0,brick_columns-1 do
	 for r=0,brick_rows-1 do	  
	  if bricks[c][r].hit == 0 then
 			brickx = (c*(brick.w+brick.spacing))+brick.x;
    bricky = (r*(brick.h+brick.spacing))+brick.y;
 	  bricks[c][r].x = brickx
 	  bricks[c][r].y = bricky
	   spr(002,brickx,bricky)
	   spr(003,brickx+8,bricky)

-- 	  rectfill(brickx,bricky,brickx+brick.w,bricky+brick.h, bricks[c][r].col) 
	  end
  end
 end
end

function _update()
	movepad()
 bounceball() 
 bouncepad()
 bouncebrick()
 moveball()
 lostdeadball()
end

function _draw()
	-- clear screen
	rectfill(0,0, 128,128, 0)
	-- draw lifes
	for i=1,lives do
	 spr(001,04+i*8,4)
	end
	-- draw score
	print(score,100,6,15)
	-- draw pad
	rectfill(pad.x,pad.y, pad.x+pad.w,pad.y+pad.h, 15)
 -- draw bricks
 drawbricks()
 -- draw ball
	--spr(004,ball.x,ball.y)

 circfill(ball.x,ball.y,ball.size,15)
end
__gfx__
000000000ee0ee00dcccccccccccd000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000eeeeeee0ccccccccccccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700eeeeeee0ccccccccccccc000005665000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
000770000eeeee001111111111110000006666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0007700000eee0000000000000000000006666000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000e00000000000000000000005665000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__label__
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
3333333333333ee3ee333ee3ee333ee3ee3333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
333333333333eeeeeee3eeeeeee3eeeeeee333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
333333333333eeeeeee3eeeeeee3eeeeeee33333333333333333333333333333333333333333333333333333333333333333ff33fff333333333333333333333
3333333333333eeeee333eeeee333eeeee3333333333333333333333333333333333333333333333333333333333333333333f33f3f333333333333333333333
33333333333333eee33333eee33333eee33333333333333333333333333333333333333333333333333333333333333333333f33f3f333333333333333333333
333333333333333e3333333e3333333e333333333333333333333333333333333333333333333333333333333333333333333f33f3f333333333333333333333
3333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333fff3fff333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
36666666666666366666666666663666666666666636666666666666366666666666663666666666666636666666666666366666666666663666666666666633
36666666666666366666666666663666666666666636666666666666366666666666663666666666666636666666666666366666666666663666666666666633
36666666666666366666666666663666666666666636666666666666366666666666663666666666666636666666666666366666666666663666666666666633
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
36666666666666366666666666663666666666666636666666666666366666666666663666666666666636666666666666366666666666663666666666666633
36666666666666366666666666663666666666666636666666666666366666666666663666666666666636666666666666366666666666663666666666666633
36666666666666366666666666663666666666666636666666666666366666666666663666666666666636666666666666366666666666663666666666666633
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
36666666666666366666666666663666666666666636666666666666366666666666663666666666666636666666666666366666666666663666666666666633
36666666666666366666666666663666666666666636666666666666366666666666663666666666666636666666666666366666666666663666666666666633
36666666666666366666666666663666666666666636666666666666366666666666663666666666666636666666666666366666666666663666666666666633
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
36666666666666366666666666663666666666666636666666666666333333333333333666666666666636666666666666366666666666663666666666666633
36666666666666366666666666663666666666666636666666666666333333333333333666666666666636666666666666366666666666663666666666666633
36666666666666366666666666663666666666666636666666666666333333333333333666666666666636666666666666366666666666663666666666666633
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333fff33333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333fffff3333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333fffff3333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333fffff3333333333333333
333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333fff33333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333
3333333333333333333333333333333333333333333333333333fffffffffffffffffffffffff333333333333333333333333333333333333333333333333333
3333333333333333333333333333333333333333333333333333fffffffffffffffffffffffff333333333333333333333333333333333333333333333333333
3333333333333333333333333333333333333333333333333333fffffffffffffffffffffffff333333333333333333333333333333333333333333333333333
3333333333333333333333333333333333333333333333333333fffffffffffffffffffffffff333333333333333333333333333333333333333333333333333
3333333333333333333333333333333333333333333333333333fffffffffffffffffffffffff333333333333333333333333333333333333333333333333333
33333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333333

__sfx__
000100003607000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
001000002d0602206019060110600a060060600000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
0110000021050000000000021050000000000021050210500000024050230002305021050000001f0500000021050000000000000000000000000000000000000000000000000000000000000000000000000000
